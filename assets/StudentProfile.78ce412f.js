import{r as s,U as C,k,a as r,j as e,B as b,C as H}from"./index.593cf930.js";import{M as m,D as B,a as A,U as E}from"./UpdatePassword.60f7edee.js";import{A as L,F as x}from"./Form.9a5b1867.js";import"./InputGroupContext.07bb0e73.js";function R(){const[l,u]=s.exports.useState(!1),N=()=>u(!1),v=()=>u(!0),a=s.exports.useRef(),[p,n]=s.exports.useState(""),[w,c]=s.exports.useState(!1),{deleteAccount:d}=C(),i=k();function f(S){if(S.preventDefault(),c(!0),a.current.value.length<6)return c(!1),n("Invalid Password.");d(a.current.value).then(h=>{h.status==="success"?i("/"):(c(!1),n(h.message))}).catch(h=>{c(!1),n("Account couldn't be deleted.")})}return r("div",{className:"w-100 text-center",children:[e(b,{variant:"link",onClick:v,children:"Delete Account?"}),r(m,{centered:!0,show:l,onHide:()=>{N(),n("")},children:[e(m.Header,{closeButton:!0,children:e(m.Title,{children:"Delete Account"})}),e(m.Body,{children:r("div",{className:"w-100",children:[p&&e(L,{variant:"danger",onClose:()=>n(""),dismissible:!0,children:p}),r(x,{onSubmit:f,children:[r(x.Group,{className:"mb-3",children:[e(x.Label,{children:"Confirm Your Password"}),e(x.Control,{type:"password",ref:a,autoComplete:"current-password",required:!0})]}),e(b,{disabled:w,className:"w-100 mt-3 mb-3",type:"submit",children:"Submit"})]})]})}),e(m.Footer,{children:e("div",{className:"w-100 text-center mt-2",children:"Note! This action is irreversible and all data will be lost permanently."})})]})]})}function T(){const{currentUser:l,logOut:u,getStudentData:N}=C(),v=k(),[a,p]=s.exports.useState(),[n,w]=s.exports.useState([]),[c,d]=s.exports.useState([]),[i,f]=s.exports.useState("All Grades"),[S,h]=s.exports.useState(!0),[j,g]=s.exports.useState(!1),[D,y]=s.exports.useState(!1);s.exports.useEffect(()=>{l!=null&&l.uid&&N(l==null?void 0:l.uid).then(t=>{t.exists()&&(p(t.data()),w(t.data().grades),d(t.data().grades))}).catch(t=>{}).finally(()=>{g(!1),y(!1)})},[l==null?void 0:l.uid,S]);const G=()=>{g(!0),h(t=>!t)},P=s.exports.useMemo(()=>{const t=[];return n.forEach(o=>{t.includes(o.subject)||t.push(o.subject)}),t},[n.length]);return s.exports.useEffect(()=>{d(i==="All Grades"?()=>n:()=>n.filter(t=>t.subject===i))},[i]),e(H,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:r("div",{className:"w-100",style:{maxWidth:"900px"},children:[a!=null&&a.name?r("h1",{className:" mb-4",children:["Hello ",a==null?void 0:a.name," !"]}):null,r("h4",{className:" mb-4",children:["Email: ",a==null?void 0:a.email]}),e(b,{variant:"outline-primary",className:"mb-4 mt-4",onClick:()=>{y(!0),G()},disabled:j,children:D?e("div",{className:"spinner-border spinner-border text-primary",style:{width:"1.5rem",height:"1.5rem"},role:"status"}):"Refresh"}),e("h3",{children:"Showing: "}),r(B,{title:i,variant:"secondary",className:"mt-2",children:[P.map((t,o)=>e(A.Item,{onClick:()=>{f(`${t}`)},children:t},o)),e(A.Item,{onClick:()=>{f("All Grades")},children:"All Grades"})]}),(c==null?void 0:c.length)>0?e("div",{className:"overflow-scroll mt-4 mb-5",style:{maxHeight:"33vh",minHeight:"15vh"},children:r("table",{className:"table h-25 table-striped",children:[e("thead",{className:"table-dark",children:r("tr",{children:[e("th",{scope:"col",children:"#"}),e("th",{scope:"col",children:"Subject"}),e("th",{scope:"col",children:"Name"}),e("th",{scope:"col",className:"text-center",children:"Grade"}),e("th",{scope:"col",className:"text-center",children:"Percentage"}),e("th",{scope:"col",className:"text-center",children:"Status"})]})}),e("tbody",{children:c.map((t,o)=>r("tr",{children:[e("th",{scope:"row",children:o+1}),e("th",{scope:"row",children:t.subject}),e("td",{children:t.name}),r("td",{className:"text-center",children:[t.mark,"/",t.total]}),r("td",{className:"text-center",children:[t.percentage,"%"]}),e("td",{className:`text-center ${t.percentage>=50?"text-success":"text-danger"}`,children:t.percentage>=50?"Passed":"Failed"})]},o))})]})}):e("h5",{className:"mt-4 mb-4 text-black-50",children:"**No marks were added yet**"}),e(E,{}),e(R,{}),e("div",{className:"w-100 mt-3",children:e(b,{variant:"outline-primary",className:"text-center mb-4 btn-lg mt-3",onClick:()=>{u(),v("/grades-portal")},children:"Log out"})})]})})}export{T as default};
